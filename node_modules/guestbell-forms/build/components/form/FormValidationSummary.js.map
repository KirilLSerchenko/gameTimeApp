{"version":3,"sources":["../../../src/lib/components/form/FormValidationSummary.tsx"],"names":["classNames","require","ArrowIcon","DefaultComponent","props","componentsWithErrors","map","component","index","validation","name","errors","err","errIndex","flex","componentApi","focus","scrollTo","FormValidationSummaryRaw","formContext","Object","keys","components","key","filter","isValid","console","warn","containerClassName","headerClassName","footerClassName","length","title","footer","React","PureComponent","Component","FormValidationSummary"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport guid from '../utils/Guid';\r\nimport { withFormContext } from './withFormContext';\r\nimport { FormContextProps, OmitFormContext, FormComponentContextState } from './FormContext';\r\nimport { Button } from './../button/Button';\r\nvar classNames = require('classnames');\r\n\r\nimport * as ArrowIcon from 'material-design-icons/maps/svg/production/ic_my_location_24px.svg';\r\nimport { FormValidationSummaryComponentProps } from './FormValidationSummary';\r\n\r\nexport interface FormValidationSummaryComponentProps {\r\n  componentsWithErrors: FormComponentContextState[];\r\n}\r\n\r\nexport type FormValidationSummaryRawProps = {\r\n  containerClassName?: string;\r\n  headerClassName?: string;\r\n  footerClassName?: string;\r\n  title?: string | JSX.Element;\r\n  footer?: string | JSX.Element;\r\n  Component?: React.ComponentType<FormValidationSummaryComponentProps> | React.StatelessComponent<FormValidationSummaryComponentProps>\r\n} & FormContextProps;\r\n\r\nexport type FormValidationSummaryProps = OmitFormContext<FormValidationSummaryRawProps>;\r\n\r\nexport interface FormValidationSummaryState {\r\n}\r\n\r\nexport const DefaultComponent: React.SFC<FormValidationSummaryComponentProps> = props => (\r\n  <React.Fragment>\r\n    {props.componentsWithErrors.map((component, index) => {\r\n      return (\r\n        <div key={index} className=\"formValidationSummary__item\">\r\n          <div className=\"formValidationSummary__item__header\">\r\n            {component.validation.name ?\r\n              component.validation.name\r\n              :\r\n              'unknown'\r\n            }\r\n          </div>\r\n          <div className=\"formValidationSummary__item__errors\">\r\n            {component.validation.errors && component.validation.errors.map((err, errIndex) => (\r\n              <span\r\n                className=\"formValidationSummary__item__error\"\r\n                key={errIndex}\r\n              >\r\n                {err}\r\n              </span>\r\n            ))}\r\n          </div>\r\n          <div style={{ flex: 'auto' }} />\r\n          {component.componentApi && component.componentApi.focus && component.componentApi.scrollTo && <Button\r\n            icon={true}\r\n            className=\"formValidationSummary__item__locate-button\"\r\n            circular={true}\r\n            type=\"error\"\r\n            small={true}\r\n            blank={true}\r\n            onClick={() => {\r\n              component.componentApi.scrollTo();\r\n              component.componentApi.focus();\r\n            }}\r\n          >\r\n            <ArrowIcon />\r\n          </Button>}\r\n        </div>\r\n      );\r\n    })}\r\n  </React.Fragment>\r\n);\r\n\r\nexport class FormValidationSummaryRaw extends React.PureComponent<FormValidationSummaryRawProps, FormValidationSummaryState> {\r\n  public static defaultProps = {\r\n    title: 'Hang on',\r\n    footer: '... needs fixing',\r\n    Component: DefaultComponent,\r\n    containerClassName: 'formValidationSummary',\r\n    headerClassName: 'formValidationSummary__header',\r\n    footerClassName: 'formValidationSummary__footer'\r\n  };\r\n\r\n  public componentId = guid();\r\n\r\n  public render() {\r\n    const componentsWithErrors = this.props.formContext ? Object.keys(this.props.formContext.components).\r\n      map(key => this.props.formContext.components[key]).\r\n      filter(component => {\r\n        if (!component.validation.isValid && !component.validation.name) {\r\n          console.warn(component, 'Has validation error. FormValidationSummary is present but the component has no validation name');\r\n        }\r\n        return !component.validation.isValid;\r\n      }) : [];\r\n    const containerClassName = classNames(this.props.containerClassName);\r\n    const headerClassName = classNames(this.props.headerClassName);\r\n    const footerClassName = classNames(this.props.footerClassName);\r\n    return componentsWithErrors.length > 0 && (\r\n      <div className={containerClassName}>\r\n        {this.props.title && <div className={headerClassName}>{this.props.title}</div>}\r\n        <this.props.Component componentsWithErrors={componentsWithErrors} />\r\n        {this.props.footer && <div className={footerClassName}>{this.props.footer}</div>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const FormValidationSummary = withFormContext<FormValidationSummaryRawProps, FormValidationSummaryProps>(FormValidationSummaryRaw);"],"file":"FormValidationSummary.js"}