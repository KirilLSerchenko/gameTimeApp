{"version":3,"sources":["../../../src/lib/components/dynamicSubmit/DynamicSubmit.tsx"],"names":["classNames","require","DynamicSubmitMode","DynamicSubmitRaw","props","state","buttonState","Normal","handleClick","bind","submitting","error","success","reset","buttonClassName","className","renderClassName","renderChildren","e","preventDefault","submitDisablesInputs","formContext","disableComponents","onClick","setState","Submitting","Error","Success","resetEnablesInputs","enableComponents","errorChildren","children","submittingChildren","successChildren","errorClassName","submittingClassName","successClassName","normalClassName","React","PureComponent","Object","assign","validateForm","DynamicSubmit"],"mappings":"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","sourcesContent":["ï»¿// Libs\r\nimport * as React from 'react';\r\nvar classNames = require('classnames');\r\nimport { withFormContext } from '../form/withFormContext';\r\nimport { OmitFormContext, FormContextProps } from '../form/FormContext';\r\nimport { InnerRefProps } from './../../types/InnerRefProps';\r\nimport { SubmitProps } from '../submit';\r\nimport { Omit } from '../utils/Typescript';\r\nimport { SubmitRaw } from './../submit/Submit';\r\n\r\n// Misc\r\n\r\nexport enum DynamicSubmitMode {\r\n  Normal,\r\n  Submitting,\r\n  Error,\r\n  Success\r\n}\r\n\r\nexport type DynamicSubmitRawProps = Omit<SubmitProps, 'onClick'> & {\r\n  onClick?: (e: React.MouseEvent<HTMLButtonElement>, submitting?: () => void, error?: () => void, success?: () => void, reset?: () => void) => void;\r\n  submittingChildren?: JSX.Element | string;\r\n  errorChildren?: JSX.Element | string;\r\n  successChildren?: JSX.Element | string;\r\n\r\n  submittingClassName?: string;\r\n  errorClassName?: string;\r\n  successClassName?: string;\r\n  normalClassName?: string;\r\n\r\n  submitDisablesInputs?: boolean;\r\n  resetEnablesInputs?: boolean;\r\n} & FormContextProps;\r\n\r\nexport type DynamicSubmitProps = OmitFormContext<DynamicSubmitRawProps> & InnerRefProps<DynamicSubmitRaw>;\r\n\r\nexport interface DynamicSubmitState {\r\n  buttonState: DynamicSubmitMode;\r\n}\r\n\r\nexport class DynamicSubmitRaw extends React.PureComponent<DynamicSubmitRawProps, DynamicSubmitState>  {\r\n  public static defaultProps = Object.assign({}, { validateForm: true, submitDisablesInputs: true, resetEnablesInputs: true });\r\n\r\n  constructor(props: DynamicSubmitRawProps) {\r\n    super(props);\r\n    this.state = {\r\n      buttonState: DynamicSubmitMode.Normal\r\n    };\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.submitting = this.submitting.bind(this);\r\n    this.error = this.error.bind(this);\r\n    this.success = this.success.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    const buttonClassName = classNames(this.props.className, this.renderClassName());\r\n    return (\r\n      <SubmitRaw\r\n        {...this.props}\r\n        className={buttonClassName}\r\n        onClick={this.handleClick}\r\n      >\r\n        {this.renderChildren()}\r\n      </SubmitRaw>\r\n    );\r\n  }\r\n\r\n  private handleClick(e: React.MouseEvent<HTMLButtonElement>) {\r\n    e.preventDefault();\r\n    this.props.submitDisablesInputs && this.props.formContext.disableComponents();\r\n    this.props.onClick && this.props.onClick(e, this.submitting, this.error, this.success, this.reset);\r\n  }\r\n\r\n  private submitting() {\r\n    this.setState({ buttonState: DynamicSubmitMode.Submitting });\r\n  }\r\n\r\n  private error() {\r\n    this.setState({ buttonState: DynamicSubmitMode.Error });\r\n  }\r\n\r\n  private success() {\r\n    this.setState({ buttonState: DynamicSubmitMode.Success });\r\n  }\r\n\r\n  private reset() {\r\n    this.props.resetEnablesInputs && this.props.formContext.enableComponents();\r\n    this.setState({ buttonState: DynamicSubmitMode.Normal });\r\n  }\r\n\r\n  private renderChildren() {\r\n    switch (this.state.buttonState) {\r\n      case DynamicSubmitMode.Error:\r\n        return this.props.errorChildren ? this.props.errorChildren : this.props.children;\r\n      case DynamicSubmitMode.Submitting:\r\n        return this.props.submittingChildren ? this.props.submittingChildren : this.props.children;\r\n      case DynamicSubmitMode.Success:\r\n        return this.props.successChildren ? this.props.successChildren : this.props.children;\r\n      default:\r\n        return this.props.children;\r\n    }\r\n  }\r\n\r\n  private renderClassName() {\r\n    switch (this.state.buttonState) {\r\n      case DynamicSubmitMode.Error:\r\n        return this.props.errorClassName ? this.props.errorClassName : '';\r\n      case DynamicSubmitMode.Submitting:\r\n        return this.props.submittingClassName ? this.props.submittingClassName : '';\r\n      case DynamicSubmitMode.Success:\r\n        return this.props.successClassName ? this.props.successClassName : '';\r\n      default:\r\n        return this.props.normalClassName ? this.props.normalClassName : '';\r\n    }\r\n  }\r\n}\r\n\r\nexport const DynamicSubmit = withFormContext<DynamicSubmitRawProps, DynamicSubmitProps>(DynamicSubmitRaw);\r\n\r\nexport default DynamicSubmit;"],"file":"DynamicSubmit.js"}