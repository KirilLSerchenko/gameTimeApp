{"version":3,"sources":["../../../../src/lib/components/base/input/BaseInput.tsx"],"names":["BaseInput","props","subscribe","res","handleValueChange","value","state","isValid","errors","touched","disabled","focused","handleValueChangeEnabled","containerRef","React","createRef","inputRef","handleChange","bind","handleBlur","handleFocus","setValid","focus","scrollTo","setInvalid","disableComponent","enableComponent","subscribeSelf","extraErrors","showValidation","length","finalErrors","concat","filter","i","lastValidation","map","item","index","ignoreContext","formContext","unSubscribe","componentId","nextProps","validators","customValidators","required","domNode","ReactDOM","findDOMNode","current","scrollIntoView","behavior","setState","touch","event","target","onTheFlightValidate","onChange","componentApi","unTouch","validation","name","validationName","title","label","e","onBlur","touchOn","Object","assign","onFocus","updateCallback","touchable","tooltip","renderTooltip","nextState","shouldUpdate","reRendersWhenContextChanges","undefined","initializing","push","forEach","validator","validInner","Validators","EmailValidator","Validate","error","NumberValidator","LatitudeValidator","LongitudeValidator","UrlValidator","Error","customValidator","onErrorsChanged","tooltipProps","Component","className"],"mappings":"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","sourcesContent":["﻿// Libs\r\nimport * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport {\r\n  Tooltip,\r\n} from 'react-tippy';\r\n\r\n// Misc\r\nimport * as Validators from '../../../validators';\r\nimport guid from '../../utils/Guid';\r\nimport { FormContextProps } from '../../form/FormContext';\r\nimport { shallowEqual } from '../../utils/ShallowEqual';\r\n\r\nexport interface ComponentApi {\r\n  focus: () => void;\r\n  touch: () => void;\r\n  unTouch: () => void;\r\n  enableComponent: () => void;\r\n  disableComponent: () => void;\r\n  scrollTo: () => void;\r\n}\r\n\r\nexport type ValidationError = string | JSX.Element;\r\n\r\nexport type AllowedHtmlElements = (HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement);\r\n\r\nexport type BaseInputProps<HTMLType extends AllowedHtmlElements> = {\r\n  disabled?: boolean;\r\n  className?: string;\r\n  label?: string | JSX.Element;\r\n  tooltip?: string | JSX.Element;\r\n  // tslint:disable-next-line:no-any\r\n  tooltipProps?: any;\r\n  value?: string;\r\n  onChange?: (e: React.ChangeEvent<HTMLType>, isValid: boolean) => void;\r\n  required?: boolean;\r\n  customValidators?: Validators.IBaseValidator[];\r\n  validators?: Validators.ValidatorTypes[];\r\n  noValidate?: boolean;\r\n  validationName?: string;\r\n  touchOn?: 'focus' | 'blur';\r\n  ignoreContext?: boolean;\r\n  onTheFlightValidate?: (value: string) => boolean;\r\n  onFocus?: (e: React.SyntheticEvent<{}>) => void;\r\n  onBlur?: () => void;\r\n  title?: string | JSX.Element;\r\n  onKeyDown?: (e: React.KeyboardEvent<HTMLElement>) => void;\r\n  errors?: ValidationError[];\r\n  onErrorsChanged?: (errors: ValidationError[]) => void;\r\n  showValidation?: boolean;\r\n  reRendersWhenContextChanges?: boolean;\r\n} & FormContextProps;\r\n\r\nexport interface BaseInputState {\r\n  isValid: boolean;\r\n  value: string;\r\n  errors: ValidationError[];\r\n  validator: undefined;\r\n  touched: boolean;\r\n  disabled: boolean;\r\n  focused: boolean;\r\n  handleValueChangeEnabled: boolean;\r\n}\r\n\r\nexport class BaseInput<P extends BaseInputProps<HTMLType>, S extends BaseInputState, HTMLType extends\r\n  AllowedHtmlElements> extends React.Component<P, S> implements ComponentApi {\r\n  public static defaultProps: BaseInputProps<never> = {\r\n    className: undefined,\r\n    required: false,\r\n    label: undefined,\r\n    disabled: false,\r\n    touchOn: 'focus',\r\n    ignoreContext: false,\r\n    showValidation: true,\r\n    formContext: undefined,\r\n    reRendersWhenContextChanges: false\r\n  };\r\n\r\n  public componentId = guid();\r\n\r\n  public inputRef: React.Ref<HTMLType> | React.RefObject<HTMLType>;\r\n\r\n  protected containerRef: React.Ref<HTMLDivElement> | React.RefObject<HTMLDivElement>;\r\n\r\n  private lastValidation: JSX.Element[];\r\n\r\n  constructor(props: P, subscribe: boolean = true) {\r\n    super(props);\r\n    const res = this.handleValueChange(this.props.value, true, [], props, true);\r\n    this.state = {\r\n      isValid: res.isValid,\r\n      errors: res.errors,\r\n      value: props.value ? props.value : '',\r\n      touched: false,\r\n      disabled: false,\r\n      focused: false,\r\n      handleValueChangeEnabled: true\r\n    } as S;\r\n    this.containerRef = React.createRef<HTMLDivElement>();\r\n    this.inputRef = React.createRef<HTMLType>();\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleBlur = this.handleBlur.bind(this);\r\n    this.handleFocus = this.handleFocus.bind(this);\r\n    this.setValid = this.setValid.bind(this);\r\n    this.focus = this.focus.bind(this);\r\n    this.scrollTo = this.scrollTo.bind(this);\r\n    this.setInvalid = this.setInvalid.bind(this);\r\n    this.disableComponent = this.disableComponent.bind(this);\r\n    this.enableComponent = this.enableComponent.bind(this);\r\n    if (subscribe) {\r\n      this.subscribeSelf(props);\r\n    }\r\n  }\r\n\r\n  protected getValidationClass(extraErrors?: ValidationError[]) {\r\n    if (!this.props.showValidation || !this.state.touched) {\r\n      return 'validation__success';\r\n    }\r\n    return (this.state.isValid\r\n      &&\r\n      (!this.props.errors || this.props.errors.length === 0)\r\n      &&\r\n      (!this.state.errors || this.state.errors.length === 0)\r\n      &&\r\n      (!extraErrors || extraErrors.length === 0)) ? 'validation__success' : 'validation__error';\r\n  }\r\n\r\n  protected renderDefaultValidation(extraErrors?: ValidationError[]) {\r\n    if (!this.props.showValidation) {\r\n      return null;\r\n    }\r\n    let finalErrors: ValidationError[] = this.state.errors;\r\n    if (!finalErrors) {\r\n      finalErrors = [];\r\n    }\r\n    if (extraErrors) {\r\n      finalErrors = finalErrors.concat(extraErrors);\r\n    }\r\n    if (this.props.errors) {\r\n      finalErrors = finalErrors.concat(this.props.errors);\r\n    }\r\n    finalErrors = finalErrors.filter(i => i);\r\n    if (finalErrors.length > 0) {\r\n      this.lastValidation = finalErrors.map((item, index) => <li key={index} className=\"validation__item\">{item}</li>);\r\n    }\r\n    return (\r\n      <div className=\"validation__container\">\r\n        <ul className=\"validation__ul\">\r\n          {this.lastValidation}\r\n        </ul>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    if (!this.props.ignoreContext) {\r\n      this.props.formContext && this.props.formContext.unSubscribe(this.componentId);\r\n    }\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: P) {\r\n    if (nextProps.value !== this.props.value\r\n      ||\r\n      nextProps.validators !== this.props.validators\r\n      ||\r\n      nextProps.customValidators !== this.props.customValidators\r\n      ||\r\n      nextProps.required !== this.props.required\r\n    ) {\r\n      this.handleValueChange(nextProps.value, true, [], nextProps);\r\n    }\r\n  }\r\n\r\n  public scrollTo() {\r\n    const domNode: HTMLDivElement = ReactDOM.findDOMNode((this.containerRef as React.RefObject<HTMLDivElement>).current) as HTMLDivElement;\r\n    domNode && domNode.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n\r\n  public touch() {\r\n    this.setState({ touched: true });\r\n    this.handleValueChange(this.state.value || '');\r\n  }\r\n\r\n  public unTouch() {\r\n    this.setState({ touched: false });\r\n  }\r\n\r\n  public disableComponent() {\r\n    this.setState({ disabled: true });\r\n  }\r\n\r\n  public enableComponent() {\r\n    this.setState({ disabled: false });\r\n  }\r\n\r\n  public focus() {\r\n    if (this.inputRef) {\r\n      const domNode: HTMLElement = ReactDOM.findDOMNode((this.inputRef as React.RefObject<HTMLElement>).current) as HTMLElement;\r\n      domNode && domNode.focus();\r\n    }\r\n    this.touch();\r\n  }\r\n\r\n  protected handleChange(event: React.ChangeEvent<HTMLType>, isValid?: boolean, errors: ValidationError[] = []) {\r\n    let value = event.target.value;\r\n    if (!this.props.onTheFlightValidate || (this.props.onTheFlightValidate && this.props.onTheFlightValidate(value))) {\r\n      const res = this.handleValueChange(value, isValid, errors);\r\n      if (this.props.onChange) {\r\n        this.props.onChange(event, res.isValid);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected subscribeSelf(props: P) {\r\n    if (!props.ignoreContext && props.formContext) {\r\n      props.formContext.subscribe(this.componentId, {\r\n        componentApi: {\r\n          disableComponent: this.disableComponent,\r\n          enableComponent: this.enableComponent,\r\n          touch: this.touch,\r\n          unTouch: this.unTouch,\r\n          scrollTo: this.scrollTo,\r\n          focus: this.focus\r\n        },\r\n        validation: {\r\n          isValid: this.state.isValid,\r\n          errors: this.state.errors,\r\n          name: this.props.validationName ? this.props.validationName : this.props.title ? this.props.title : this.props.label\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  protected handleBlur(e: React.FocusEvent<HTMLType>) {\r\n    this.props.onBlur && this.props.onBlur();\r\n    let state = { focused: false };\r\n    if (!this.state.touched && this.props.touchOn === 'blur') {\r\n      state = Object.assign(state, { touched: true });\r\n      this.handleValueChange(this.state.value);\r\n    }\r\n    this.setState(state);\r\n  }\r\n\r\n  protected handleFocus(e: React.FocusEvent<HTMLType>) {\r\n    this.props.onFocus && this.props.onFocus(e);\r\n    let state = { focused: true };\r\n    if (!this.state.touched && this.props.touchOn === 'focus') {\r\n      state = Object.assign(state, { touched: true });\r\n      this.handleValueChange(this.state.value);\r\n    }\r\n    this.setState(state);\r\n  }\r\n\r\n  protected getDisabled() {\r\n    return this.state.disabled ? this.state.disabled : this.props.disabled;\r\n  }\r\n\r\n  protected setValid() {\r\n    this.setState(() => ({ isValid: true, errors: [] }), () => {\r\n      if (!this.props.ignoreContext) {\r\n        this.props.formContext && this.props.formContext.updateCallback(this.componentId, {\r\n          validation: {\r\n            isValid: true,\r\n            errors: [],\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  protected setInvalid(errors: ValidationError[] = []) {\r\n    this.setState(() => ({ isValid: false, errors }), () => {\r\n      if (!this.props.ignoreContext) {\r\n        this.props.formContext && this.props.formContext.updateCallback(this.componentId, {\r\n          validation: {\r\n            isValid: false,\r\n            errors: errors,\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  protected renderLabel(touchable: boolean = false) {\r\n    if ((!this.props.tooltip) || (this.props.tooltip && this.props.title)) {\r\n      return (\r\n        <span className={(touchable ? '' : 'label--no-touch')}>\r\n          {this.props.label}\r\n        </span>\r\n      );\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <span className={(touchable ? '' : 'label--no-touch')}>\r\n          {this.props.label}\r\n        </span>\r\n        {this.renderTooltip()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  protected renderTitle() {\r\n    if (!this.props.tooltip) {\r\n      return this.props.title;\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        {this.props.title}\r\n        {this.renderTooltip()}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  public shouldComponentUpdate(nextProps: P, nextState: S) {\r\n    let shouldUpdate = !shallowEqual(this.props, nextProps, !this.props.reRendersWhenContextChanges ? 'formContext' : undefined)\r\n      || !shallowEqual(this.state, nextState);\r\n    return shouldUpdate;\r\n  }\r\n\r\n  protected handleValueChange(value: string, isValid: boolean = true, errors: ValidationError[] = [], props: P = this.props, initializing: boolean = false): {\r\n    isValid: boolean;\r\n    errors: ValidationError[];\r\n  } {\r\n    if (!initializing && !this.state.handleValueChangeEnabled) {\r\n      return { isValid, errors: [] };\r\n    }\r\n    if (props.required && !value) {\r\n      errors.push('Required');\r\n      isValid = false;\r\n    } else {\r\n      if (!props.required && !value) {\r\n        isValid = true;\r\n      } else {\r\n        if (props.validators) {\r\n          isValid = true;\r\n          props.validators.forEach(validator => {\r\n            let validInner = false;\r\n            switch (validator) {\r\n              case 'email':\r\n                validInner = new Validators.EmailValidator().Validate(value, props.required, (error) => errors.push(error));\r\n                break;\r\n              case 'number':\r\n                validInner = new Validators.NumberValidator().Validate(value, props.required, (error) => errors.push(error));\r\n                break;\r\n              case 'latitude':\r\n                validInner = new Validators.LatitudeValidator().Validate(value, props.required, (error) => errors.push(error));\r\n                break;\r\n              case 'longitude':\r\n                validInner = new Validators.LongitudeValidator().Validate(value, props.required, (error) => errors.push(error));\r\n                break;\r\n              case 'url':\r\n                validInner = new Validators.UrlValidator().Validate(value, props.required, (error) => errors.push(error));\r\n                break;\r\n              default:\r\n                throw new Error(`Validator ${validator} not implemented`);\r\n            }\r\n            if (isValid && !validInner) {\r\n              isValid = validInner;\r\n            }\r\n          });\r\n        }\r\n        if (props.customValidators) {\r\n          props.customValidators.forEach(customValidator => {\r\n            let validInner = false;\r\n            validInner = customValidator.Validate(value, props.required, (error) => errors.push(error));\r\n            if (isValid && !validInner) {\r\n              isValid = validInner;\r\n            }\r\n          });\r\n        }\r\n      }\r\n    }\r\n    props.onErrorsChanged && props.onErrorsChanged(errors);\r\n    if (!initializing) {\r\n      this.setState({ value, isValid, errors });\r\n      if (!props.ignoreContext) {\r\n        props.formContext && props.formContext.updateCallback(this.componentId, {\r\n          validation: {\r\n            isValid: isValid,\r\n            errors: errors,\r\n          }\r\n        });\r\n      }\r\n    }\r\n    return { isValid, errors };\r\n  }\r\n\r\n  private renderTooltip() {\r\n    return (\r\n      <Tooltip\r\n        html={this.props.tooltip}\r\n        position=\"bottom\"\r\n        trigger=\"mouseenter\"\r\n        interactive={true}\r\n        className=\"label--help-icon__container\"\r\n        animateFill={false}\r\n        {...this.props.tooltipProps}\r\n      >\r\n        <span className=\"label--help-icon\">?</span>\r\n      </Tooltip>\r\n    );\r\n  }\r\n}\r\nexport default BaseInput;\r\n"],"file":"BaseInput.js"}