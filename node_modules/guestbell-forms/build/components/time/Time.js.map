{"version":3,"sources":["../../../src/lib/components/time/Time.tsx"],"names":["ArrowIcon","TimeRaw","props","e","state","hoursText","handleHoursChange","minutesText","handleMinutesChange","setState","undefined","handleBlur","target","value","preventDefault","time","getMinutes","toString","getHours","bind","hours","mid","title","getValidationClass","className","containerRef","addHourClick","getDisabled","required","onHoursChanged","onBlur","handleFocus","removeHourClick","addMinuteClick","onMinutesChanged","removeMinuteClick","renderDefaultValidation","min","getTime","timeChange","Date","max","hoursString","num","Number","isNaN","newTime","setHours","handleLimits","minutesString","setMinutes","BaseInput","Object","assign","defaultProps","type","placeholder","Time"],"mappings":"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","sourcesContent":["import * as ArrowIcon from 'material-design-icons/hardware/svg/production/ic_keyboard_arrow_down_24px.svg';\r\n\r\n// Libs\r\nimport * as React from 'react';\r\n\r\n// Misc\r\nimport InputGroup from '../inputGroup/InputGroup';\r\nimport { BaseInputProps, BaseInputState, BaseInput } from '../base/input/BaseInput';\r\nimport { withFormContext } from '../form/withFormContext';\r\nimport { OmitFormContext } from '../form/FormContext';\r\nimport { InnerRefProps } from './../../types/InnerRefProps';\r\n\r\nexport interface TimeRawProps extends BaseInputProps<HTMLInputElement> {\r\n  onChange?: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  timeChange: (time: Date) => void;\r\n  time: Date;\r\n  min?: Date;\r\n  max?: Date;\r\n  label?: never;\r\n}\r\n\r\nexport type TimeProps = OmitFormContext<TimeRawProps> & InnerRefProps<TimeRaw>;\r\n\r\nexport interface TimeState extends BaseInputState {\r\n  hoursText?: string;\r\n  minutesText?: string;\r\n}\r\n\r\nexport class TimeRaw extends BaseInput<TimeRawProps, TimeState, HTMLInputElement>  {\r\n  public static defaultProps = Object.assign({}, BaseInput.defaultProps, { type: 'time', placeholder: '' });\r\n\r\n  constructor(props: TimeRawProps) {\r\n    super(props);\r\n    this.handleHoursChange = this.handleHoursChange.bind(this);\r\n    this.handleMinutesChange = this.handleMinutesChange.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    var hours = this.props.time.getHours();\r\n    hours = (hours + 24) % 24;\r\n    var mid = 'AM';\r\n    if (hours === 0) { // At 00 hours we need to show 12 am\r\n      hours = 12;\r\n    } else if (hours > 12) {\r\n      hours = hours % 12;\r\n      mid = 'PM';\r\n    }\r\n    return (\r\n      <InputGroup title={this.props.title}>\r\n        <div\r\n          className={'input__base time-input ' + this.getValidationClass() + ' ' + (this.props.className ? this.props.className : '')}\r\n          ref={this.containerRef}\r\n        >\r\n          <div className=\"\">\r\n            <div className=\"time-input__arrows__container\">\r\n              <button\r\n                className=\"plus\"\r\n                onClick={this.addHourClick}\r\n              >\r\n                <ArrowIcon />\r\n              </button>\r\n              <div className=\"input-padding\">\r\n                <input\r\n                  disabled={this.getDisabled()}\r\n                  required={this.props.required}\r\n                  className={'time-input__time ' + (this.state.value ? 'filled' : '')}\r\n                  onChange={this.onHoursChanged}\r\n                  value={this.state.hoursText !== undefined ? this.state.hoursText : this.props.time.getHours().toString()}\r\n                  onBlur={this.onBlur}\r\n                  onFocus={this.handleFocus}\r\n                  type=\"number\"\r\n                />\r\n                <span className=\"highlight\" />\r\n              </div>\r\n              <button\r\n                className=\"minus\"\r\n                onClick={this.removeHourClick}\r\n              >\r\n                <ArrowIcon />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <span className=\"\">:</span>\r\n          <div className=\"\">\r\n            <div className=\"time-input__arrows__container\">\r\n              <button\r\n                className=\"plus\"\r\n                onClick={this.addMinuteClick}\r\n              >\r\n                <ArrowIcon />\r\n              </button>\r\n              <div className=\"input-padding\">\r\n                <input\r\n                  disabled={this.getDisabled()}\r\n                  required={this.props.required}\r\n                  className={'time-input__time ' + (this.state.value ? 'filled' : '')}\r\n                  onChange={this.onMinutesChanged}\r\n                  value={this.state.minutesText !== undefined ? this.state.minutesText :\r\n                    this.props.time.getMinutes() < 10 ?\r\n                      '0' + this.props.time.getMinutes().toString()\r\n                      :\r\n                      this.props.time.getMinutes().toString()}\r\n                  onBlur={this.onBlur}\r\n                  onFocus={this.handleFocus}\r\n                  type=\"number\"\r\n                />\r\n                <span className=\"highlight\" />\r\n              </div>\r\n              <button\r\n                className=\"minus\"\r\n                onClick={this.removeMinuteClick}\r\n              >\r\n                <ArrowIcon />\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <span className=\"time-input__am-pm\">{mid}</span>\r\n          </div>\r\n          {this.renderDefaultValidation()}\r\n        </div>\r\n      </InputGroup>\r\n    );\r\n  }\r\n\r\n  private onBlur = (e: React.FocusEvent<HTMLInputElement>) => {\r\n    if (this.state.hoursText) {\r\n      this.handleHoursChange(this.state.hoursText);\r\n    }\r\n    if (this.state.minutesText) {\r\n      this.handleMinutesChange(this.state.minutesText);\r\n    }\r\n    this.setState({ minutesText: undefined, hoursText: undefined }, () => this.handleBlur(e));\r\n  }\r\n\r\n  private onMinutesChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    // this.handleMinutesChange(e.target.value);\r\n    this.setState({ minutesText: e.target.value });\r\n  }\r\n\r\n  private removeMinuteClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    this.handleMinutesChange((this.props.time.getMinutes() - 1).toString());\r\n  }\r\n\r\n  private addMinuteClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    this.handleMinutesChange((this.props.time.getMinutes() + 1).toString());\r\n  }\r\n\r\n  private removeHourClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    this.handleHoursChange((this.props.time.getHours() - 1).toString());\r\n  }\r\n\r\n  private onHoursChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    // this.handleHoursChange(e.target.value);\r\n    this.setState({ hoursText: e.target.value });\r\n  }\r\n\r\n  private addHourClick = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n    e.preventDefault();\r\n    this.handleHoursChange((this.props.time.getHours() + 1).toString());\r\n  }\r\n\r\n  private handleLimits(time: Date) {\r\n    if (this.props.min) {\r\n      if ((time.getTime() - this.props.min.getTime()) <= 0) {\r\n        this.props.timeChange(new Date(this.props.min.getTime()));\r\n        return;\r\n      }\r\n    }\r\n    if (this.props.max) {\r\n      if ((this.props.max.getTime() - time.getTime()) <= 0) {\r\n        this.props.timeChange(new Date(this.props.max.getTime()));\r\n        return;\r\n      }\r\n    }\r\n    this.props.timeChange(time);\r\n  }\r\n\r\n  private handleHoursChange(hoursString: string) {\r\n    let num = Number(hoursString);\r\n    if (hoursString === '') {\r\n      num = 0;\r\n    }\r\n    if (!isNaN(num)) {\r\n      let newTime: Date = new Date(this.props.time.getTime());\r\n      newTime.setHours(num);\r\n      this.handleLimits(newTime);\r\n    }\r\n  }\r\n\r\n  private handleMinutesChange(minutesString: string) {\r\n    let num = Number(minutesString);\r\n    if (minutesString === '') {\r\n      num = 0;\r\n    }\r\n    if (!isNaN(num)) {\r\n      let newTime: Date = new Date(this.props.time.getTime());\r\n      newTime.setMinutes(num);\r\n      this.handleLimits(newTime);\r\n    }\r\n  }\r\n}\r\n\r\nexport const Time = withFormContext<TimeRawProps, TimeProps>(TimeRaw);\r\n\r\nexport default Time;\r\n"],"file":"Time.js"}